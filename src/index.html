<!doctype html>
<html lang="en">
	<head>
		<title>UACh Battlegrounds</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link href="css/styles.css" type="text/css" rel="stylesheet">

		<!-- jQuery -->
		<script src="js/libs/jquery.js"></script>

		<!-- Socket.IO -->
		<script src="/socket.io/socket.io.js"></script>

		<!-- Librería para ver el rendimiento -->
		<script src="js/libs/stats.min.js"></script>

		<!-- Librería para detectar la compatibilidad del navegador -->
		<script src="js/libs/detector.js"></script>

		<!-- Librería para facilitar el uso de WebGL -->
		<script src="js/libs/three.js"></script>

		<!-- Librería para importar archivos .GLT -->
		<script src="js/libs/GLTFLoader.js"></script>

		<!-- Librería para los physics -->
		<script src="js/libs/cannon.js"></script>

		<!-- Funciones de utilidad -->
		<script src="js/game/utils.js"></script>

		<!-- Loader -->
		<script src="js/game/loader.js"></script>

		<!-- Server Player -->
		<script src="js/game/serverPlayer.js"></script>

		<!-- Player -->
		<script src="js/game/player.js"></script>

		<!-- Input -->
		<script src="js/game/input.js"></script>

		<!-- Comunicación con el servidor -->
		<script src="js/game/client.js"></script>


	</head>

	<body onresize="resizeScreen()">

		<!-- Container de WebGL -->
		<div id="gameWindow"></div>

		<!-- Interfaz del juego -->
		<div id="gameUI" class="unselec">

			<div id="killCounter">
				<div class="title">SCORE</div>
				<div class="teams">

					<div class="a">
						<div class="team A">Allies</div>
						<div class="count">0</div>
					</div>

					<div class="b">
						<div class="team B">Enemies</div>
						<div class="count">0</div>
					</div>

				</div>
			</div>

			<div id="healthBar">
				<div class="barContainer">
					<div class="bar"></div>
				</div>
				<img src="textures/UI/health.png">
			</div>

			<div id="ammoBar">
				<div class="barContainer">
					<div class="bar"></div>
				</div>
				<img src="textures/UI/bullets.png">
			</div>

			<img id="crosshair" src="textures/UI/crosshair.png">
			<div id="damageScreen"></div>
			<div id="serverMessages"><div class="container"></div></div>
		</div>

		<!-- Menús del juego -->
		<div id="mainMenu">

			<div id="usernameMenu" class="mainMenu" style="display:block">
				<img class="logo" src="textures/UI/logo.png"><br>
				<div class="title">Austral Tournament</div>
				<div class="loadMenu">
					<div class="loadBarContainer">
						<div class="loadBar"></div>
					</div>
					<div class="loadText">Loading assets...</div>
				</div>
				<input id="setUsernameInput" class="hidden" type="text" placeholder="Nombre de Usuario"><br>
				<button id="setUsernameBtn" class="hidden" onclick="setUserName()">Continuar</button>
				<button id="createServerBtn" class="hidden" onclick="showCreateServerMenu()">Crear Servidor</button><br>
				<button id="showServersBtn" class="hidden" onclick="showServersListMenu()">Unirse a Servidor</button>
			</div>

			<div id="createServerMenu" class="mainMenu">
				<div class="title">Nuevo Servidor</div>
				<input id="serverNameInput" type="text" placeholder="Nombre del Servidor"><br>
				<input id="serverPassInput" type="password" placeholder="Contraseña del Servidor"><br>
				<button id="createServerBtn" onclick="createServer()">Crear</button><br>
				<button id="cancelCreateServerBtn" onclick="showMainMenu()">Cancelar</button><br>
			</div>

			<div id="serversListMenu" class="mainMenu">
				<div class="title">Servidores</div>
				<div class="serversList"></div>
				<button id="cancelServersListBtn" onclick="showMainMenu()">Volver</button><br>
			</div>

			<div id="loginServerMenu" class="mainMenu">
				<div class="title"></div>
				<input id="loginServerPasswordInput" type="password" placeholder="Contraseña del Servidor"><br>
				<button id="loginServerBtn" onclick="logIntoServer()">Login</button><br>
				<button id="cancelServersListBtn" onclick="showServersListMenu()">Volver</button><br>
			</div>

			<div id="joinServerMenu" class="mainMenu">
				<div class="serverTitle">Nombre del Servidor</div>
				<div class="teams">
					<button id="joinTeamABtn" onclick="joinTeamA()">Crear</button><br>
				</div>
				<button id="cancelServersListBtn" onclick="cancelJoinServer()">Volver</button><br>
			</div>

			<div id="mainMenuError" class="errorMsg">Mensaje de error.</div>
		</div>


		<!-- Lógica del juego -->
		<script src="js/game/game.js"></script>

		<script>

			function initWebGL()
			{
				// Detecta si el navegador soporta WebGL
		    if (!Detector.webgl)
		    {
		      // Despliega alerta de incompatibilidad
		      Detector.addGetWebGLMessage();
		    }
		    else
		    {
		      // Inicia el juego (game/loader.js)
		      loadModels();
		    }
			}

			function showFPS()
			{
				var gameLoop = loop;
				var stats = new Stats();

				stats.domElement.style.position = "absolute";
				stats.domElement.style.left = "0px";
				stats.domElement.style.top = "0px";

				document.body.appendChild( stats.domElement );

				loop = function()
				{
					stats.begin();
					gameLoop();
					stats.end();
				}
			}

		</script>

	</body>
</html>
